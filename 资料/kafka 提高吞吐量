1. kafka 为什么吞吐量高
    1. kafka 的 message 是不断追加写入到本地磁盘的, 而不是随机写入
    2. kafka 利用了操作系统的页缓存而不是 jvm 内存, 读写速度直接取决于内存
    3. 零拷贝机制, 在用户消费数据的时候, 采用了 page cache 和 sendfile 方法, 直接从内存写入到了 socket 缓冲区, 避免落地磁盘
    4. kafka的存储机制, kafka 的 message 是按照 topic 分类存储的, topic 中的数据又是按照 partition 存储在不同的 broker 中
        每个 partition 又被分成多个 sessagement 分段存储, 每个分段包含了数据文件和索引文件, 这种分区加分段加索引的方式加快了读写
    5. kafka 可以设置批量写入
    6. 批量压缩, 他在网络传输的时候, 并不是把每个消息都压缩然后发送, 而是把一批消息压缩, 然后传输

2. kafka 如何提高吞吐量
    1. 最简单的增加集群数量
    2. 增大服务器的带宽
    3. 磁盘换成 SSD
    4. 创建 topic 时增加分区数量
    5. 创建后增加分区数量, 可以修改, 参数请求 buffer 大小等
    6. ack 设置为 1